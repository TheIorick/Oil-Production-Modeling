<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Task3_10.ViewModels"
        xmlns:models="using:Task3_10.Models"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="Task3_10.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Моделирование нефтедобычи">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <!-- Стили для приложения -->
        <Style Selector="Button.control">
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        
        <Style Selector="TextBlock.header">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*">
        <!-- Панель управления -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
            <Button Content="Добавить буровую" Command="{Binding AddOilRigCommand}" Classes="control"/>
            <Button Content="Запустить" Command="{Binding StartSimulationCommand}" Classes="control"/>
            <Button Content="Остановить" Command="{Binding StopSimulationCommand}" Classes="control"/>
        </StackPanel>
        
        <!-- Основной контент -->
        <TabControl Grid.Row="1" Margin="10">
            <!-- Вкладка "Буровые установки" -->
            <TabItem Header="Буровые установки">
                <Grid RowDefinitions="Auto,*,Auto">
                    <TextBlock Grid.Row="0" Text="Список буровых установок" Classes="header"/>
                    
                    <!-- Список буровых установок -->
                    <ListBox Grid.Row="1" 
                             ItemsSource="{Binding OilRigs}" 
                             SelectedItem="{Binding SelectedOilRig}">
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType="models:OilRig">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" Margin="5,0"/>
                                    <TextBlock Grid.Column="1" Text="{Binding Status}" Margin="5,0"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <!-- Кнопки управления буровыми -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="5">
                        <Button Content="Удалить буровую" 
                                Command="{Binding RemoveOilRigCommand}" 
                                CommandParameter="{Binding SelectedOilRig}"
                                Classes="control"
                                IsEnabled="{Binding SelectedOilRig, Converter={x:Static ObjectConverters.IsNotNull}}"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
            <!-- Вкладка "Рабочие скважины" -->
            <TabItem Header="Рабочие скважины">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Grid.Row="0" Text="Список рабочих скважин" Classes="header"/>
                    
                    <!-- Список рабочих скважин -->
                    <ListBox Grid.Row="1" ItemsSource="{Binding WorkingWells}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" Margin="5,0"/>
                                    <TextBlock Grid.Column="1" Text="{Binding Status}" Margin="5,0"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </TabItem>
            
            <!-- Вкладка "Насосы" -->
            <TabItem Header="Насосы">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Grid.Row="0" Text="Список насосов" Classes="header"/>
                    
                    <!-- Список насосов -->
                    <ListBox Grid.Row="1" ItemsSource="{Binding Pumps}">
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType="models:Pump">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" Margin="5,0"/>
                                    <TextBlock Grid.Column="1" Text="{Binding IsBusy}" Margin="5,0"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </TabItem>
            
            <!-- Вкладка "Хранилища" -->
            <TabItem Header="Хранилища">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Grid.Row="0" Text="Список хранилищ" Classes="header"/>
                    
                    <!-- Список хранилищ -->
                    <ListBox Grid.Row="1" ItemsSource="{Binding Storages}">
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType="models:Storage">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" Margin="5,0"/>
                                    <TextBlock Grid.Column="1" Text="{Binding CurrentCapacity}" Margin="5,0"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </TabItem>
            
            <!-- Вкладка "Статистика" -->
            <TabItem Header="Статистика">
                <Grid RowDefinitions="Auto,*">
                    <TextBlock Grid.Row="0" Text="Статистика добычи" Classes="header"/>
                    
                    <!-- Статистика -->
                    <ListBox Grid.Row="1" ItemsSource="{Binding Statistics}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>